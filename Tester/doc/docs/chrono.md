Хронограф - это механизм, который позволяет формировать скриншоты для каждого шага в ходе выполнения сценария. Хронограф создан для анализа сложно-воспроизводимых падений, где кроме изображения с ошибкой, требуется визуальное наблюдение всего цикла тестирования. Хронограф может оказаться лучше отладки в тех случаях, когда падения происходят из-за нежелательной связности тестов, отдельная отладка которых не выявляет источник проблемы.

Хронограф активируется в коде сценария и по умолчанию выключен. Для работы с хронографом предназначены функции: [ХронографСтарт](api.md#RecorderStart), [ХронографСтоп](api.md#RecorderStop), [ХронографОчистить](api.md#RecorderClean) и служебная структура [Хронограф](api.md#RecorderStart), которая доступна на уровне каждого сценария, и инициализируется после вызова [ХронографСтарт](api.md#RecorderStart).

В интерфейсе Тестера, хронограф может быть открыт из основного меню сценария, или контекстного меню в дереве сценариев:

![](/img/2019_08_13_21_34_441.png)

А также из контекстного меню журнала ошибок или журнала выполнения:

![](/img/2019_08_13_21_37_072.png)

При работе с хронографом, следует обращать внимание на следующие особенности:

1.  Снятие скриншотов ресурсоёмкая операция, и может увеличить время прохождения тестов на 10% и более
2.  Скриншоты формируются в соответствии с настройками заголовка тестируемого приложения и опцией качества (см. [Формирование скриншотов](screenshots.md))
3.  Для кода сценария, выполняемого на сервере, скриншоты не формируются
4.  Запись картинок производится в базу данных тестера. На каждом шаге выполняется серверный вызов. Поэтому, если вы используете метод платформы `ПоместитьФайл`(ы), убедитесь, что последним параметром вы передаете сформированный ранее идентификатор, хранящейся в некоторой переменной, в модуле сценария. В противном случае, после помещения файла во временное хранилище, данные из него будут неявно удалены еще до выполнения следующей строки кода сценария (см. также [Как понять, что послужило зависанию или трудноуловимой ошибке в работе приложения (менеджера или клиента тестирования)?](http://test1c.com/#Bug)).
5.  При использовании хронографа в процессе исполнения сценариев, захваченных другими пользователями, хронограф использует их (сценариев) последние версии, а не захваченные сценарии. Таким образом, для анализа хода выполнения таких сценариев, необходимо открыть версию сценария, и только затем, хронограф по выбранной версии.

Чтобы не загружать базу тестов данными хронографа, существует метод [ХронографОчистить](api.md#RecorderClean). Вы можете использовать его отдельно, запуская по необходимости в специальном сценарии, либо в коде самих тестов, сразу удаляя ненужные данные:

    ХронографСтарт ();
    
    //...
    // Выполняются действия сценария
    //...
    
    // Если в сценарии возникнет ошибка, до этого места выполнение не дойдет, ошибка будет
    // зафиксирована стандартным образом. Но если ошибок не будет, код ниже
    // очистит данные хронографа накопленные для этого сценария (не включая подчиненные!)
    ХронографСтоп ();
    ХронографОчистить ( Хронограф.Сценарий );

Кроме этого, следует отметить, что хронограф создает копии сценариев по версиям в служебном справочнике `Modules`. Для скорости обработки, метод [ХронографОчистить](api.md#RecorderClean) их не удаляет. С течением времени, там может накапливаться большое количество элементов, которое не сказывается на производительности, но увеличивает общий объем базы данных. При необходимости, вы можете помечать на удаление и удалять элементы этого справочника, стандартным образом.
